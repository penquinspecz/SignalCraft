{
    "executionArn": "arn:aws:states:us-east-1:048622080012:execution:signalcraft-dr-orchestrator-state-machine:m19b-success-true-20260227T044403Z",
    "stateMachineArn": "arn:aws:states:us-east-1:048622080012:stateMachine:signalcraft-dr-orchestrator-state-machine",
    "name": "m19b-success-true-20260227T044403Z",
    "status": "FAILED",
    "startDate": "2026-02-26T23:44:04.372000-05:00",
    "stopDate": "2026-02-26T23:45:50.324000-05:00",
    "input": "{\n  \"expected_account_id\": \"048622080012\",\n  \"region\": \"us-east-1\",\n  \"project\": \"signalcraft\",\n  \"publish_bucket\": \"jobintel-prod1\",\n  \"publish_prefix\": \"jobintel\",\n  \"backup_bucket\": \"jobintel-prod1\",\n  \"backup_uri\": \"s3://jobintel-prod1/jobintel/backups/backup-20260221T061624Z\",\n  \"backup_required_keys\": [\n    \"metadata.json\",\n    \"state.tar.zst\",\n    \"manifests.tar.zst\"\n  ],\n  \"receipt_bucket\": \"jobintel-prod1\",\n  \"receipt_prefix\": \"jobintel/dr-orchestrator/receipts\",\n  \"notification_topic_arn\": \"arn:aws:sns:us-east-1:048622080012:signalcraft-dr-notifications\",\n  \"provider\": \"openai\",\n  \"profile\": \"cs\",\n  \"expected_marker_file\": \"openai_top.cs.md\",\n  \"max_freshness_hours\": 6,\n  \"metric_namespace\": \"SignalCraft/DR\",\n  \"dr_runner_name\": \"jobintel-dr-runner\",\n  \"dr_vpc_id\": \"vpc-4362fc3e\",\n  \"dr_subnet_id\": \"subnet-11001d5c\",\n  \"dr_allowed_cidr\": \"10.0.0.0/8\",\n  \"dr_key_name\": \"\",\n  \"dr_instance_type\": \"t4g.small\",\n  \"dr_ami_id\": \"\",\n  \"namespace\": \"jobintel\",\n  \"validate_timeout_seconds\": 300,\n  \"force_run\": true\n}",
    "inputDetails": {
        "included": true
    },
    "error": "States.Runtime",
    "cause": "An error occurred while executing the state 'BringupInfra' (entered at the event id #13). The function 'States.Format('s3://{}/{}/{}/codebuild-bringup.json', $.receipt_bucket, $.receipt_prefix, $$.Execution.Name)' had the following error: The JsonPath argument for the field '$.receipt_bucket' could not be found in the input '{\"SdkHttpMetadata\":{\"AllHttpHeaders\":{\"x-amzn-RequestId\":[\"121c4164-ced0-4c43-b94a-422bbb1cf1d3\"],\"Content-Length\":[\"10113\"],\"Date\":[\"Fri, 27 Feb 2026 04:45:50 GMT\"],\"Content-Type\":[\"application/x-amz-json-1.1\"]},\"HttpHeaders\":{\"Content-Length\":\"10113\",\"Content-Type\":\"application/x-amz-json-1.1\",\"Date\":\"Fri, 27 Feb 2026 04:45:50 GMT\",\"x-amzn-RequestId\":\"121c4164-ced0-4c43-b94a-422bbb1cf1d3\"},\"HttpStatusCode\":200},\"SdkResponseMetadata\":{\"RequestId\":\"121c4164-ced0-4c43-b94a-422bbb1cf1d3\"},\"Build\":{\"Arn\":\"arn:aws:codebuild:us-east-1:048622080012:build/signalcraft-dr-orchestrator-dr-infra:de383d1d-118e-4dd7-8c89-8680b0252527\",\"Artifacts\":{\"Location\":\"\",\"OverrideArtifactName\":false},\"BuildComplete\":true,\"BuildNumber\":6,\"BuildStatus\":\"SUCCEEDED\",\"Cache\":{\"Type\":\"NO_CACHE\"},\"CurrentPhase\":\"COMPLETED\",\"EncryptionKey\":\"arn:aws:kms:us-east-1:048622080012:alias/aws/s3\",\"EndTime\":1772167544738,\"Environment\":{\"ComputeType\":\"BUILD_GENERAL1_MEDIUM\",\"EnvironmentVariables\":[{\"Name\":\"RECEIPT_BUCKET\",\"Type\":\"PLAINTEXT\",\"Value\":\"jobintel-prod1\"},{\"Name\":\"TF_VAR_allowed_cidr\",\"Type\":\"PLAINTEXT\",\"Value\":\"10.0.0.0/8\"},{\"Name\":\"EXECUTION_ID\",\"Type\":\"PLAINTEXT\",\"Value\":\"m19b-success-true-20260227T044403Z\"},{\"Name\":\"TF_BUNDLE_BUCKET\",\"Type\":\"PLAINTEXT\",\"Value\":\"jobintel-prod1\"},{\"Name\":\"TF_VAR_instance_type\",\"Type\":\"PLAINTEXT\",\"Value\":\"t4g.small\"},{\"Name\":\"TF_VAR_subnet_id\",\"Type\":\"PLAINTEXT\",\"Value\":\"subnet-11001d5c\"},{\"Name\":\"AWS_REGION\",\"Type\":\"PLAINTEXT\",\"Value\":\"us-east-1\"},{\"Name\":\"TF_VAR_key_name\",\"Type\":\"PLAINTEXT\",\"Value\":\"\"},{\"Name\":\"TF_BUNDLE_KEY\",\"Type\":\"PLAINTEXT\",\"Value\":\"jobintel/dr-orchestrator/artifacts/dr-terraform-module.zip\"},{\"Name\":\"TF_STATE_KEY\",\"Type\":\"PLAINTEXT\",\"Value\":\"jobintel/dr/terraform/dr-runner.tfstate\"},{\"Name\":\"TF_VERSION\",\"Type\":\"PLAINTEXT\",\"Value\":\"1.8.5\"},{\"Name\":\"ACTION\",\"Type\":\"PLAINTEXT\",\"Value\":\"bringup\"},{\"Name\":\"TF_VAR_ami_id\",\"Type\":\"PLAINTEXT\",\"Value\":\"\"},{\"Name\":\"TF_VAR_region\",\"Type\":\"PLAINTEXT\",\"Value\":\"us-east-1\"},{\"Name\":\"EXPECTED_ACCOUNT_ID\",\"Type\":\"PLAINTEXT\",\"Value\":\"048622080012\"},{\"Name\":\"TF_VAR_vpc_id\",\"Type\":\"PLAINTEXT\",\"Value\":\"vpc-4362fc3e\"},{\"Name\":\"RECEIPT_PREFIX\",\"Type\":\"PLAINTEXT\",\"Value\":\"jobintel/dr-orchestrator/receipts\"},{\"Name\":\"TF_STATE_BUCKET\",\"Type\":\"PLAINTEXT\",\"Value\":\"signalcraft-dr-tfstate-048622080012-us-east-1\"},{\"Name\":\"TF_STATE_DYNAMODB_TABLE\",\"Type\":\"PLAINTEXT\",\"Value\":\"signalcraft-dr-tf-lock\"}],\"Image\":\"aws/codebuild/standard:7.0\",\"ImagePullCredentialsType\":\"CODEBUILD\",\"PrivilegedMode\":false,\"Type\":\"LINUX_CONTAINER\"},\"Id\":\"signalcraft-dr-orchestrator-dr-infra:de383d1d-118e-4dd7-8c89-8680b0252527\",\"Initiator\":\"states/signalcraft-dr-orchestrator-state-machine\",\"Logs\":{\"CloudWatchLogs\":{\"GroupName\":\"/aws/codebuild/signalcraft-dr-orchestrator-dr-infra\",\"Status\":\"ENABLED\"},\"CloudWatchLogsArn\":\"arn:aws:logs:us-east-1:048622080012:log-group:/aws/codebuild/signalcraft-dr-orchestrator-dr-infra:log-stream:de383d1d-118e-4dd7-8c89-8680b0252527\",\"DeepLink\":\"https://console.aws.amazon.com/cloudwatch/home?region=us-east-1#logsV2:log-groups/log-group/$252Faws$252Fcodebuild$252Fsignalcraft-dr-orchestrator-dr-infra/log-events/de383d1d-118e-4dd7-8c89-8680b0252527\",\"GroupName\":\"/aws/codebuild/signalcraft-dr-orchestrator-dr-infra\",\"S3Logs\":{\"EncryptionDisabled\":false,\"Status\":\"DISABLED\"},\"StreamName\":\"de383d1d-118e-4dd7-8c89-8680b0252527\"},\"Phases\":[{\"DurationInSeconds\":0,\"EndTime\":1772167447529,\"PhaseStatus\":\"SUCCEEDED\",\"PhaseType\":\"SUBMITTED\",\"StartTime\":1772167447406},{\"DurationInSeconds\":0,\"EndTime\":1772167448277,\"PhaseStatus\":\"SUCCEEDED\",\"PhaseType\":\"QUEUED\",\"StartTime\":1772167447529},{\"Contexts\":[{\"Message\":\"\",\"StatusCode\":\"\"}],\"DurationInSeconds\":4,\"EndTime\":1772167452991,\"PhaseStatus\":\"SUCCEEDED\",\"PhaseType\":\"PROVISIONING\",\"StartTime\":1772167448277},{\"Contexts\":[{\"Message\":\"\",\"StatusCode\":\"\"}],\"DurationInSeconds\":0,\"EndTime\":1772167453812,\"PhaseStatus\":\"SUCCEEDED\",\"PhaseType\":\"DOWNLOAD_SOURCE\",\"StartTime\":1772167452991},{\"Contexts\":[{\"Message\":\"\",\"StatusCode\":\"\"}],\"DurationInSeconds\":33,\"EndTime\":1772167487441,\"PhaseStatus\":\"SUCCEEDED\",\"PhaseType\":\"INSTALL\",\"StartTime\":1772167453812},{\"Contexts\":[{\"Message\":\"\",\"StatusCode\":\"\"}],\"DurationInSeconds\":0,\"EndTime\":1772167487487,\"PhaseStatus\":\"SUCCEEDED\",\"PhaseType\":\"PRE_BUILD\",\"StartTime\":1772167487441},{\"Contexts\":[{\"Message\":\"\",\"StatusCode\":\"\"}],\"DurationInSeconds\":56,\"EndTime\":1772167544344,\"PhaseStatus\":\"SUCCEEDED\",\"PhaseType\":\"BUILD\",\"StartTime\":1772167487487},{\"Contexts\":[{\"Message\":\"\",\"StatusCode\":\"\"}],\"DurationInSeconds\":0,\"EndTime\":1772167544390,\"PhaseStatus\":\"SUCCEEDED\",\"PhaseType\":\"POST_BUILD\",\"StartTime\":1772167544344},{\"Contexts\":[{\"Message\":\"\",\"StatusCode\":\"\"}],\"DurationInSeconds\":0,\"EndTime\":1772167544442,\"PhaseStatus\":\"SUCCEEDED\",\"PhaseType\":\"UPLOAD_ARTIFACTS\",\"StartTime\":1772167544390},{\"Contexts\":[{\"Message\":\"\",\"StatusCode\":\"\"}],\"DurationInSeconds\":0,\"EndTime\":1772167544738,\"PhaseStatus\":\"SUCCEEDED\",\"PhaseType\":\"FINALIZING\",\"StartTime\":1772167544442},{\"PhaseType\":\"COMPLETED\",\"StartTime\":1772167544738}],\"ProjectName\":\"signalcraft-dr-orchestrator-dr-infra\",\"QueuedTimeoutInMinutes\":60,\"SecondarySourceVersions\":[],\"SecondarySources\":[],\"ServiceRole\":\"arn:aws:iam::048622080012:role/signalcraft-dr-orchestrator-codebuild-role\",\"Source\":{\"Buildspec\":\"\\\"env\\\":\\n  \\\"shell\\\": \\\"bash\\\"\\n\\\"phases\\\":\\n  \\\"build\\\":\\n    \\\"commands\\\":\\n    - \\\"set -euo pipefail\\\"\\n    - \\\": \\\\\\\"${ACTION:?ACTION is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${EXECUTION_ID:?EXECUTION_ID is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${EXPECTED_ACCOUNT_ID:?EXPECTED_ACCOUNT_ID is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${AWS_REGION:?AWS_REGION is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${RECEIPT_BUCKET:?RECEIPT_BUCKET is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${RECEIPT_PREFIX:?RECEIPT_PREFIX is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${TF_BUNDLE_BUCKET:?TF_BUNDLE_BUCKET is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${TF_BUNDLE_KEY:?TF_BUNDLE_KEY is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${TF_STATE_BUCKET:?TF_STATE_BUCKET is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${TF_STATE_KEY:?TF_STATE_KEY is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${TF_STATE_DYNAMODB_TABLE:?TF_STATE_DYNAMODB_TABLE is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${TF_VAR_region:?TF_VAR_region is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${TF_VAR_vpc_id:?TF_VAR_vpc_id is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${TF_VAR_subnet_id:?TF_VAR_subnet_id is required}\\\\\\\"\\\"\\n    - \\\": \\\\\\\"${TF_VAR_allowed_cidr:?TF_VAR_allowed_cidr is required}\\\\\\\"\\\"\\n    - \\\"ACTUAL_ACCOUNT_ID=\\\\\\\"$(aws sts get-caller-identity --query Account --output\\n      text)\\\\\\\"\\\"\\n    - |\\n      if [[ \\\"${ACTUAL_ACCOUNT_ID}\\\" != \\\"${EXPECTED_ACCOUNT_ID}\\\" ]]; then\\n        echo \\\"account mismatch: expected=${EXPECTED_ACCOUNT_ID} actual=${ACTUAL_ACCOUNT_ID}\\\" >&2\\n        exit 1\\n      fi\\n    - \\\"WORK_DIR=\\\\\\\"/tmp/dr-terraform\\\\\\\"\\\"\\n    - \\\"rm -rf \\\\\\\"${WORK_DIR}\\\\\\\" /tmp/dr-terraform.zip\\\"\\n    - \\\"aws s3 cp \\\\\\\"s3://${TF_BUNDLE_BUCKET}/${TF_BUNDLE_KEY}\\\\\\\" /tmp/dr-terraform.zip\\\"\\n    - \\\"mkdir -p \\\\\\\"${WORK_DIR}\\\\\\\"\\\"\\n    - \\\"unzip -q /tmp/dr-terraform.zip -d \\\\\\\"${WORK_DIR}\\\\\\\"\\\"\\n    - \\\"cd \\\\\\\"${WORK_DIR}\\\\\\\"\\\"\\n    - |\\n      terraform init -input=false \\\\\\n        -backend-config=\\\"bucket=${TF_STATE_BUCKET}\\\" \\\\\\n        -backend-config=\\\"key=${TF_STATE_KEY}\\\" \\\\\\n        -backend-config=\\\"region=${AWS_REGION}\\\" \\\\\\n        -backend-config=\\\"dynamodb_table=${TF_STATE_DYNAMODB_TABLE}\\\" \\\\\\n        -backend-config=\\\"encrypt=true\\\"\\n    - \\\"terraform fmt -check\\\"\\n    - \\\"terraform validate\\\"\\n    - |\\n      tf_var_args=(\\n        -var \\\"region=${TF_VAR_region}\\\"\\n        -var \\\"vpc_id=${TF_VAR_vpc_id}\\\"\\n        -var \\\"subnet_id=${TF_VAR_subnet_id}\\\"\\n        -var \\\"allowed_cidr=${TF_VAR_allowed_cidr}\\\"\\n        -var \\\"instance_type=${TF_VAR_instance_type:-t4g.small}\\\"\\n      )\\n      if [[ -n \\\"${TF_VAR_key_name:-}\\\" ]]; then\\n        tf_var_args+=( -var \\\"key_name=${TF_VAR_key_name}\\\" )\\n      fi\\n      if [[ -n \\\"${TF_VAR_ami_id:-}\\\" ]]; then\\n        tf_var_args+=( -var \\\"ami_id=${TF_VAR_ami_id}\\\" )\\n      fi\\n\\n      case \\\"${ACTION}\\\" in\\n        bringup)\\n          terraform plan -input=false \\\"${tf_var_args[@]}\\\" -out=tfplan\\n          terraform apply -auto-approve tfplan\\n          ;;\\n        teardown)\\n          terraform plan -destroy -input=false \\\"${tf_var_args[@]}\\\" -out=tfplan-destroy\\n          terraform apply -auto-approve tfplan-destroy\\n          ;;\\n        *)\\n          echo \\\"unsupported ACTION=${ACTION}\\\" >&2\\n          exit 2\\n          ;;\\n      esac\\n    - \\\"terraform output -json > /tmp/dr_tf_outputs.json || echo '{}' > /tmp/dr_tf_outputs.json\\\"\\n    - \\\"RECEIPT_KEY=\\\\\\\"${RECEIPT_PREFIX}/${EXECUTION_ID}/codebuild-${ACTION}.json\\\\\\\"\\\"\\n    - |\\n      python3 - <<'PY' > /tmp/codebuild_receipt.json\\n      import datetime as dt\\n      import json\\n      import os\\n      from pathlib import Path\\n\\n      outputs_path = Path('/tmp/dr_tf_outputs.json')\\n      outputs = json.loads(outputs_path.read_text(encoding='utf-8')) if outputs_path.exists() else {}\\n\\n      payload = {\\n          'schema_version': 1,\\n          'timestamp_utc': dt.datetime.now(dt.timezone.utc).strftime('%Y-%m-%dT%H:%M:%SZ'),\\n          'phase': os.environ['ACTION'],\\n          'status': 'ok',\\n          'execution_id': os.environ['EXECUTION_ID'],\\n          'build_id': os.environ.get('CODEBUILD_BUILD_ID', ''),\\n          'account_id': os.environ.get('ACTUAL_ACCOUNT_ID', ''),\\n          'region': os.environ['AWS_REGION'],\\n          'terraform_backend': {\\n              'bucket': os.environ['TF_STATE_BUCKET'],\\n              'key': os.environ['TF_STATE_KEY'],\\n              'dynamodb_table': os.environ['TF_STATE_DYNAMODB_TABLE'],\\n          },\\n          'terraform_outputs': outputs,\\n      }\\n      print(json.dumps(payload, indent=2, sort_keys=True))\\n      PY\\n    - \\\"aws s3 cp /tmp/codebuild_receipt.json \\\\\\\"s3://${RECEIPT_BUCKET}/${RECEIPT_KEY}\\\\\\\"\\n      --content-type application/json\\\"\\n    - \\\"echo \\\\\\\"receipt=s3://${RECEIPT_BUCKET}/${RECEIPT_KEY}\\\\\\\"\\\"\\n  \\\"install\\\":\\n    \\\"commands\\\":\\n    - \\\"set -euo pipefail\\\"\\n    - \\\"apt-get update\\\"\\n    - \\\"DEBIAN_FRONTEND=noninteractive apt-get install -y unzip curl jq >/dev/null\\\"\\n    - \\\"curl -fsSL -o /tmp/terraform.zip \\\\\\\"https://releases.hashicorp.com/terraform/${TF_VERSION}/terraform_${TF_VERSION}_linux_amd64.zip\\\\\\\"\\\"\\n    - \\\"unzip -o /tmp/terraform.zip -d /usr/local/bin >/dev/null\\\"\\n    - \\\"terraform version\\\"\\n\\\"version\\\": 0.2\\n\",\"GitCloneDepth\":0,\"InsecureSsl\":false,\"Type\":\"NO_SOURCE\"},\"StartTime\":1772167447406,\"TimeoutInMinutes\":30}}'",
    "redriveCount": 0,
    "redriveStatus": "REDRIVABLE"
}
